import{a as R}from"./chunk-PGLN5SI4.js";import{C as b,D as o,E as t,F as m,K as a,L as l,Pa as k,Q as E,R as p,S as c,Ta as P,U as u,Wa as I,Xa as N,Y as w,Ya as T,Z as S,k as h,ma as D,pa as M,s as g,u as d,w as v,x,y,z as C}from"./chunk-HEUN4NMA.js";var F=()=>({responsive:!0});function A(r,n){r&1&&(o(0,"tr")(1,"th"),a(2,"Cliente"),t(),o(3,"th",23),a(4,"Pago"),t(),o(5,"th",23),a(6,"Pendente"),t()())}function V(r,n){if(r&1&&(o(0,"tr")(1,"td",24),a(2),t(),o(3,"td",25),a(4),p(5,"currency"),t(),o(6,"td",26),a(7),p(8,"currency"),t()()),r&2){let e=n.$implicit;d(2),l(e.nome),d(2),l(c(5,3,e.pago,"BRL")),d(3),l(c(8,6,e.pendente,"BRL"))}}var f=class r{constructor(n){this.apiService=n}pedidos=g([]);loading=g(!0);kpis=u(()=>{let n=this.pedidos();return{pagos:n.filter(e=>e.pago).length,pendentes:n.filter(e=>!e.pago).length,totalVendido:n.filter(e=>e.pago).reduce((e,i)=>e+(Number(i.valorTotal)||0),0)}});chartData=u(()=>{let n=this.pedidos(),e=new Map;return n.forEach(i=>{i.itensPedido?.forEach(s=>{let B=e.get(s.nomeProduto)||0;e.set(s.nomeProduto,B+s.quantidade)})}),{labels:Array.from(e.keys()),datasets:[{label:"Quantidade Vendida",data:Array.from(e.values()),backgroundColor:["#6366F1","#F59E0B","#10B981","#EF4444","#EC4899"],borderWidth:1}]}});clientesResumo=u(()=>{let n=this.pedidos(),e=new Map;return n.forEach(i=>{e.has(i.nomeCliente)||e.set(i.nomeCliente,{nome:i.nomeCliente,pago:0,pendente:0});let s=e.get(i.nomeCliente);i.pago?s.pago+=Number(i.valorTotal):s.pendente+=Number(i.valorTotal)}),Array.from(e.values())});ngOnInit(){this.apiService.getPedidos().subscribe(n=>{this.pedidos.set(n),this.loading.set(!1)})}static \u0275fac=function(e){return new(e||r)(v(R))};static \u0275cmp=x({type:r,selectors:[["app-dashboard"]],standalone:!1,decls:39,vars:12,consts:[[1,"p-4","mr-2","ml-2"],[1,"grid","mb-4"],[1,"col-12","md:col-4"],[1,"card","p-4","shadow-2","border-round","bg-blue-500","text-white","h-full","flex","flex-column","justify-content-between"],[1,"flex","justify-content-between","align-items-start"],[1,"block","font-semibold","mb-3","text-blue-100","uppercase","text-sm","tracking-wider"],[1,"text-3xl","font-bold"],[1,"pi","pi-dollar","text-5xl","opacity-80"],[1,"card","p-4","shadow-2","border-round","bg-green-500","text-white","h-full","flex","flex-column","justify-content-between"],[1,"block","font-semibold","mb-3","text-green-100","uppercase","text-sm","tracking-wider"],[1,"text-5xl","font-bold"],[1,"pi","pi-check-circle","text-5xl","opacity-80"],[1,"card","p-4","shadow-2","border-round","bg-orange-500","text-white","h-full","flex","flex-column","justify-content-between"],[1,"block","font-semibold","mb-3","text-orange-100","uppercase","text-sm","tracking-wider"],[1,"pi","pi-clock","text-5xl","opacity-80"],[1,"grid"],[1,"col-12","lg:col-6"],["header","Produtos Mais Vendidos","styleClass","shadow-2"],["type","bar",3,"data","options"],["header","Resumo Financeiro por Cliente","styleClass","shadow-2"],["styleClass","p-datatable-sm",3,"value","rows","paginator"],["pTemplate","header"],["pTemplate","body"],[1,"text-right"],[1,"font-bold"],[1,"text-right","text-green-600","font-medium"],[1,"text-right","text-red-500","font-medium"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div")(6,"span",5),a(7,"Total Vendido (Pago)"),t(),o(8,"div",6),a(9),p(10,"currency"),t()(),m(11,"i",7),t()()(),o(12,"div",2)(13,"div",8)(14,"div",4)(15,"div")(16,"span",9),a(17,"Pedidos Pagos"),t(),o(18,"div",10),a(19),t()(),m(20,"i",11),t()()(),o(21,"div",2)(22,"div",12)(23,"div",4)(24,"div")(25,"span",13),a(26,"Pedidos Pendentes"),t(),o(27,"div",10),a(28),t()(),m(29,"i",14),t()()()(),o(30,"div",15)(31,"div",16)(32,"p-card",17),m(33,"p-chart",18),t()(),o(34,"div",16)(35,"p-card",19)(36,"p-table",20),C(37,A,7,0,"ng-template",21)(38,V,9,9,"ng-template",22),t()()()()()),e&2&&(d(9),l(c(10,8,i.kpis().totalVendido,"BRL")),d(10),l(i.kpis().pagos),d(9),l(i.kpis().pendentes),d(5),b("data",i.chartData())("options",E(11,F)),d(3),b("value",i.clientesResumo())("rows",5)("paginator",!0))},dependencies:[k,M,P,I,w],encapsulation:2})};var L=[{path:"",component:f}],_=class r{static \u0275fac=function(e){return new(e||r)};static \u0275mod=y({type:r});static \u0275inj=h({imports:[S,T,D.forChild(L),N]})};export{_ as DashboardModule};
