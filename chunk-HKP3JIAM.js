import{a as de}from"./chunk-PGLN5SI4.js";import{A as F,B as q,Ba as W,C as m,D as n,Da as X,E as t,F as a,G as P,H as x,I as p,J as T,Ja as Y,K as r,L as A,La as Z,M as f,Ma as ee,Na as te,Pa as ne,Q as D,Qa as ie,R as I,Ra as oe,S as M,Sa as re,U as C,Ua as ae,Va as se,Y as V,Ya as le,Z as U,g as j,i as w,ja as B,k as L,m as N,ma as $,n as _,na as z,o as y,oa as G,pa as H,q as E,s as g,sa as J,u as s,w as b,x as O,xa as K,y as R,z as k,za as Q}from"./chunk-HEUN4NMA.js";function ce(o,e){let l=!e?.manualCleanup?e?.injector?.get(E)??N(E):null,d=pe(e?.equal),c;e?.requireSync?c=g({kind:0},{equal:d}):c=g({kind:1,value:e?.initialValue},{equal:d});let v,h=o.subscribe({next:u=>c.set({kind:1,value:u}),error:u=>{c.set({kind:2,error:u}),v?.()},complete:()=>{v?.()}});if(e?.requireSync&&c().kind===0)throw new w(601,!1);return v=l?.onDestroy(h.unsubscribe.bind(h)),C(()=>{let u=c();switch(u.kind){case 1:return u.value;case 2:throw u.error;case 0:throw new w(601,!1)}},{equal:e?.equal})}function pe(o=Object.is){return(e,i)=>e.kind===1&&i.kind===1&&o(e.value,i.value)}var fe=()=>({width:"450px"}),ge=()=>({"font-size":"10px",padding:"0.2rem 0.6rem"});function xe(o,e){o&1&&(n(0,"tr")(1,"th",24),r(2,"Cliente"),t(),n(3,"th",25),r(4,"E-mail"),t(),n(5,"th",26),r(6,"Itens"),t(),n(7,"th",26),r(8,"Status"),t(),n(9,"th",26),r(10,"Total"),t(),n(11,"th",27),r(12,"A\xE7\xF5es"),t()())}function ve(o,e){o&1&&(n(0,"tr")(1,"td"),a(2,"p-skeleton"),t(),n(3,"td"),a(4,"p-skeleton"),t(),n(5,"td"),a(6,"p-skeleton"),t(),n(7,"td"),a(8,"p-skeleton"),t(),n(9,"td"),a(10,"p-skeleton"),t(),n(11,"td"),a(12,"p-skeleton"),t()())}function be(o,e){if(o&1&&(n(0,"div",17)(1,"p-table",21),k(2,xe,13,0,"ng-template",22)(3,ve,13,0,"ng-template",23),t()()),o&2){let i=p();s(),m("value",i.skeletons)}}function Ce(o,e){o&1&&(n(0,"tr",30)(1,"th",31),r(2,"Cliente "),a(3,"p-sortIcon",32),t(),n(4,"th",33),r(5,"E-mail"),t(),n(6,"th",34),r(7,"Itens"),t(),n(8,"th",34),r(9,"Status"),t(),n(10,"th",35),r(11,"Total "),a(12,"p-sortIcon",36),t(),n(13,"th",34),r(14,"A\xE7\xF5es"),t()())}function he(o,e){if(o&1){let i=P();n(0,"tr",37)(1,"td")(2,"div",8)(3,"div",38),r(4),t(),n(5,"span",39),r(6),t()()(),n(7,"td")(8,"span",40),a(9,"i",41),r(10),t()(),n(11,"td",42)(12,"div",43),a(13,"i",44),r(14),t()(),n(15,"td",42),a(16,"p-tag",45),t(),n(17,"td",46)(18,"span",47),r(19),I(20,"currency"),t()(),n(21,"td",42)(22,"div",48)(23,"p-button",49),x("onClick",function(){let d=_(i).$implicit,c=p(2);return y(c.editarPedido(d.id))}),t(),n(24,"p-button",50),x("onClick",function(){let d=_(i).$implicit,c=p(2);return y(c.deletarPedido(d))}),t()()()()}if(o&2){let i=e.$implicit;s(4),f(" ",i.nomeCliente.substring(0,2).toUpperCase()," "),s(2),A(i.nomeCliente),s(4),f("",i.emailCliente," "),s(4),f(" ",(i.itensPedido==null?null:i.itensPedido.length)||0," "),s(2),T(D(17,ge)),m("value",i.pago?"PAGO":"PENDENTE")("severity",i.pago?"success":"warn")("rounded",!0),s(3),f(" ",M(20,14,i.valorTotal,"BRL")," "),s(4),m("rounded",!0)("text",!0),s(),m("rounded",!0)("text",!0)}}function _e(o,e){if(o&1&&(n(0,"tr"),a(1,"td",51),n(2,"td",52)(3,"span",53),r(4),I(5,"currency"),t()(),a(6,"td",54),t()),o&2){let i=p(2);s(4),f(" ",M(5,1,i.totalGeral(),"BRL")," ")}}function ye(o,e){if(o&1){let i=P();n(0,"tr")(1,"td",55),a(2,"i",56),n(3,"p",57),r(4),t(),n(5,"p-button",58),x("onClick",function(){_(i);let d=p(2);return y(d.searchControl.setValue(""))}),t()()()}if(o&2){let i=p(2);s(4),f('N\xE3o encontramos pedidos para "',i.searchControl.value,'".'),s(),m("text",!0)}}function Se(o,e){if(o&1&&(n(0,"p-table",18),k(1,Ce,15,0,"ng-template",22)(2,he,25,18,"ng-template",23)(3,_e,7,4,"ng-template",28)(4,ye,6,2,"ng-template",29),t()),o&2){let i=p();m("value",i.pedidosFiltrados())("paginator",!0)("rows",8)("rowHover",!0)}}var S=class o{constructor(e,i,l,d){this.apiService=e;this.router=i;this.confirmationService=l;this.messageService=d}pedidos=g([]);loading=g(!0);skeletons=Array(5).fill(0);searchControl=new W("");filterText=ce(this.searchControl.valueChanges.pipe(j(0)),{initialValue:""});pedidosFiltrados=C(()=>{let e=this.filterText()?.toLowerCase()||"",i=this.pedidos();return e?i.filter(l=>{let d=l.nomeCliente?.toLowerCase()||"",c=l.emailCliente?.toLowerCase()||"",v=l.pago?"conclu\xEDdo pago":"pendente",h=l.valorTotal?.toString()||"";return d.includes(e)||c.includes(e)||v.includes(e)||h.includes(e)}):i});totalGeral=C(()=>this.pedidosFiltrados().reduce((e,i)=>e+(Number(i.valorTotal)||0),0));ngOnInit(){this.carregarPedidos()}carregarPedidos(){this.loading.set(!0),this.apiService.getPedidos().subscribe({next:e=>{this.pedidos.set(Array.isArray(e)?e:[]),this.loading.set(!1)},error:()=>this.loading.set(!1)})}deletarPedido(e){this.confirmationService.confirm({message:`Tem certeza que deseja excluir o pedido de <b>${e.nomeCliente}</b>? Esta a\xE7\xE3o n\xE3o pode ser desfeita.`,header:"Confirmar Exclus\xE3o",icon:"pi pi-trash",acceptLabel:"Sim, Excluir",rejectLabel:"Cancelar",acceptButtonStyleClass:"p-button-danger p-button-text",rejectButtonStyleClass:"p-button-secondary p-button-text",accept:()=>{this.executeDelete(e.id)}})}executeDelete(e){this.apiService.deletarPedido(e).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Exclu\xEDdo",detail:"O pedido foi removido com sucesso."}),this.carregarPedidos()},error:()=>{this.messageService.add({severity:"error",summary:"Erro",detail:"N\xE3o foi poss\xEDvel excluir o pedido."})}})}novoPedido(){this.router.navigate(["/pedidos/novo"])}editarPedido(e){this.router.navigate(["/pedidos",e,"editar"])}static \u0275fac=function(i){return new(i||o)(b(de),b(B),b(z),b(G))};static \u0275cmp=O({type:o,selectors:[["app-pedidos-list"]],standalone:!1,decls:23,vars:9,consts:[[1,"card","border-none","shadow-3","m-2","md:m-5","border-round-xl","overflow-hidden","bg-white","dark:bg-surface-900"],[1,"flex","flex-column","lg:flex-row","lg:justify-content-between","lg:align-items-center","px-0","p-4","bg-white","dark:bg-surface-900","gap-4","border-bottom-1","border-100","dark:border-surface-700"],[1,"flex","align-items-center","gap-4"],[1,"relative"],[1,"w-3rem","h-3rem","bg-primary-500","border-round-xl","flex","align-items-center","justify-content-center","shadow-2"],[1,"pi","pi-shopping-bag","text-white","text-xl"],[1,"absolute","top-0","right-0","block","w-1rem","h-1rem","border-2","border-white","bg-green-500","border-round-circle","-mr-1","-mt-1"],[1,"flex","flex-column"],[1,"flex","align-items-center","gap-2"],[1,"m-0","text-900","font-extrabold","text-2xl","tracking-tight"],[1,"pi","pi-circle-fill","text-green-500",2,"font-size","8px"],["severity","secondary",3,"value","rounded"],[1,"flex","flex-column","sm:flex-row","gap-3","w-full","lg:w-auto"],["iconPosition","left",1,"w-full"],[1,"pi","pi-search","text-primary-500"],["type","text","pInputText","","placeholder","Pesquisar cliente, status ou valor...",1,"w-full","lg:w-20rem","border-round-xl","shadow-sm","bg-gray-50","focus:bg-white","transition-all",3,"formControl"],["icon","pi pi-refresh","severity","secondary","pTooltip","Sincronizar API",3,"onClick","text"],[1,"p-4"],["responsiveLayout","stack","breakpoint","960px","styleClass","p-datatable-sm p-datatable-hoverable",3,"value","paginator","rows","rowHover"],[1,"fixed","bottom-0","right-0","m-4","z-5"],["icon","pi pi-plus","pTooltip","Criar Novo Pedido","tooltipPosition","left","styleClass","shadow-6 h-4rem w-4rem transition-transform hover:scale-110 active:scale-95 bg-primary-600 border-none",3,"onClick","rounded"],[1,"p-datatable-sm",3,"value"],["pTemplate","header"],["pTemplate","body"],[2,"width","25%"],[2,"width","20%"],[2,"width","15%"],[2,"width","10%"],["pTemplate","footer"],["pTemplate","emptymessage"],[1,"text-sm","uppercase","text-500"],["pSortableColumn","nomeCliente",1,"bg-transparent"],["field","nomeCliente"],[1,"bg-transparent"],[1,"text-center","bg-transparent"],["pSortableColumn","valorTotal",1,"text-right","bg-transparent"],["field","valorTotal"],[1,"text-900","border-bottom-1","border-100"],[1,"w-2rem","h-2rem","border-round-circle","bg-primary-100","text-primary-700","flex","align-items-center","justify-content-center","font-bold","text-xs"],[1,"font-medium"],[1,"text-600","text-sm"],[1,"pi","pi-envelope","mr-1","text-xs","text-primary-300"],[1,"text-center"],[1,"inline-flex","align-items-center","gap-1","px-2","py-1","bg-gray-100","border-round-md","text-700","font-medium"],[1,"pi","pi-box","text-xs"],[3,"value","severity","rounded"],[1,"text-right"],[1,"font-bold","text-lg","text-primary-700","font-monospace"],[1,"flex","justify-content-center","gap-1"],["icon","pi pi-pencil","severity","secondary","pTooltip","Editar",3,"onClick","rounded","text"],["icon","pi pi-trash","severity","danger","pTooltip","Excluir",3,"onClick","rounded","text"],["colspan","4",1,"text-right","bg-gray-50","dark:bg-surface-800","p-0"],[1,"text-right","bg-gray-50","dark:bg-surface-800","p-3","px-1"],[1,"text-xl","font-bold","text-primary-700"],[1,"bg-gray-50","dark:bg-surface-800"],["colspan","6",1,"text-center","p-8"],[1,"pi","pi-search-plus","text-4xl","text-200","mb-3"],[1,"text-600","font-medium"],["label","Limpar Busca","size","small",3,"onClick","text"]],template:function(i,l){i&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),a(5,"i",5),t(),a(6,"span",6),t(),n(7,"div",7)(8,"div",8)(9,"h2",9),r(10,"Gest\xE3o de Pedidos"),t(),a(11,"i",10)(12,"p-tag",11),t()()(),n(13,"div",12)(14,"p-iconfield",13),a(15,"p-inputicon",14)(16,"input",15),t(),n(17,"p-button",16),x("onClick",function(){return l.carregarPedidos()}),t()()(),a(18,"p-confirmDialog"),F(19,be,4,1,"div",17)(20,Se,5,4,"p-table",18),n(21,"div",19)(22,"p-button",20),x("onClick",function(){return l.novoPedido()}),t()()()),i&2&&(s(12),m("value",l.pedidosFiltrados().length+" exibidos")("rounded",!0),s(4),m("formControl",l.searchControl),s(),m("text",!0),s(),T(D(8,fe)),s(),q(l.loading()?19:20),s(3),m("rounded",!0))},dependencies:[K,Q,X,ne,H,ie,oe,J,Y,re,ae,te,Z,ee,se,V],styles:["[_nghost-%COMP%]     .p-table .p-table-tbody>tr>td{padding:1rem}.fixed[_ngcontent-%COMP%]{position:fixed}[_nghost-%COMP%]     .p-datatable-footer{padding:0!important;border:none!important}.font-monospace[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace;letter-spacing:-1px}"]})};var we=[{path:"",component:S}],me=class o{static \u0275fac=function(i){return new(i||o)};static \u0275mod=R({type:o});static \u0275inj=L({imports:[U,le,$.forChild(we)]})};export{me as HomeModule};
